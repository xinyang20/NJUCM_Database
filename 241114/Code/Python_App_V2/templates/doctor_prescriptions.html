<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的处方</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="navbar">
        <a href="/dashboard" class="logo">中药代煎系统</a>
        <div>
            {% if session['role'] == 'admin' %}
                <a href="/admin/profile">个人信息</a>
                <a href="/admin/users">用户管理</a>
                <a href="/admin/assign_tasks">分配任务</a>
            {% elif session['role'] == 'patient' %}
                <a href="/patient/profile">个人信息</a>
                <a href="/patient/prescriptions">查看处方</a>
            {% elif session['role'] == 'doctor' %}
                <a href="/doctor/profile">个人信息</a>
                <a href="/doctor/prescriptions">我的处方</a>
                <a href="/doctor/prescriptions/new">开新处方</a>
            {% elif session['role'] == 'worker' %}
                <a href="/worker/profile">个人信息</a>
                <a href="/worker/tasks">我的任务</a>
            {% endif %}
            <a href="/logout">注销</a>
        </div>
    </div>

    <h1>我的处方</h1>

    <!-- 创建新处方按钮 -->
    <div style="display: flex; justify-content: center; margin-top: 20px;">
        <a href="/doctor/prescriptions/new" class="button" style="background-color: #0066cc; color: white; border: none; border-radius: 4px; padding: 10px 20px; text-decoration: none; font-size: 16px; text-align: center;">
            创建新处方
        </a>
    </div>



    <!-- 显示医生的处方列表 -->
    <h2>处方列表</h2>
    <table>
        <thead>
            <tr>
                <th>处方 ID</th>
                <th>患者 ID</th>
                <th>金额</th>
                <th>状态</th>
                <th>创建时间</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            {% for item in prescriptions %}
            <tr>
                <td>{{ item.prescription.prescription_id }}</td>
                <td>{{ item.prescription.patient_id }}</td>
                <td>{{ item.prescription.amount }}</td>
                <td>{{ item.status }}</td>
                <td>{{ item.prescription.date }}</td>
                <td>
                    <a href="/doctor/prescriptions/view/{{ item.prescription.prescription_id }}">查看详情</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <footer>
        © 2024 中药代煎 系统
    </footer>
</body>
</html>
