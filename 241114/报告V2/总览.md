### **中药代煎系统设计报告**

#### **1. 中药代煎系统规划**

**1.1 研究项目现状及研究意义**

随着我国中医药事业的蓬勃发展，中药代煎服务需求日益增长，市场潜力巨大。然而，传统的人工管理模式已难以满足现代化中药代煎服务的需求。为此，开发一个信息化的中药代煎管理系统势在必行。该系统旨在通过现代信息技术提高代煎服务的效率和质量，降低人工成本，提升患者满意度。

该系统不仅能帮助中药房和医院更高效地处理患者的代煎需求，还能追踪患者的历史用药信息，为患者提供个性化和精准的代煎服务，进而增强患者的信任和忠诚度。

**1.2 研究项目可行性分析**

从技术、安全和经济三个方面进行可行性分析。

- **技术可行性**：系统采用 **Flask** 框架与 **SQLAlchemy** ORM 技术实现，结合 **SQL Server** 进行数据管理。Python 和 SQL Server 的广泛应用及易用性使得技术实现具有很高的可行性。开发人员可以迅速上手，且开发周期短。
- **安全可行性**：系统通过用户身份验证、数据加密以及数据库备份等多种手段保障数据安全。用户密码采用哈希加密存储，重要数据通过 SSL 加密传输，确保患者的个人隐私和医疗数据的安全性。
- **经济可行性**：开发该系统无需额外的软件采购费用，且系统优化了代煎过程中的各个环节，减少了人工干预，提高了工作人员的工作效率。长期来看，系统的投入将大幅度提高经济效益。

------

#### **2. 中药代煎系统需求分析**

**2.1 系统主要功能**

中药代煎管理系统的主要功能包括：

- **患者信息管理**：记录患者的基本信息，包括姓名、性别、年龄、联系方式等，并能够查询历史代煎记录。
- **处方管理**：医生根据患者需求开具处方，系统记录处方的详细信息，包括药材数量、用法、配方状态等。
- **代煎药品管理**：药品信息的增删改查功能，确保药品的库存和使用记录的准确性。
- **任务管理**：跟踪代煎过程中各环节的任务，包括配方、浸泡、煎药等，确保任务按时完成。
- **管理员管理**：管理员负责系统维护、人员管理和系统设置，确保系统运行的稳定性。

**2.2 数据字典（DD）**

数据字典定义了系统中所有数据实体及其属性，帮助开发人员和用户理解各个字段的含义和数据类型。

- **患者表（patients）**：包括 `patient_id`（患者ID）、`name`（姓名）、`gender`（性别）、`age`（年龄）、`contact_number`（联系方式）。
- **医生表（doctors）**：包括 `doctor_id`（医生ID）、`name`（姓名）、`department`（科室）、`title`（职称）、`contact_number`（联系方式）。
- **处方表（prescriptions）**：包括 `prescription_id`（处方ID）、`patient_id`（患者ID）、`doctor_id`（医生ID）、`date`（开方日期）、`amount`（处方金额）、`usage_instructions`（用法）等。
- **任务表（tasks）**：包括 `task_id`（任务ID）、`prescription_id`（处方ID）、`worker_id`（工人ID）、`status`（任务状态）等。

**2.3 数据流图（DFD）**

数据流图（DFD）展示了系统中各个模块的数据流向与交互。系统包含多个子系统，如：

- **患者信息管理**：患者数据流入处方管理、任务管理等子系统。
- **处方管理**：医生开具的处方数据流入任务管理，分配任务给不同的工作人员。
- **任务管理**：根据任务分配信息跟踪药品配方、煎药过程等，最后更新任务状态。

------

#### **3. 中药代煎系统概念结构设计**

**3.1 实体及属性**

根据需求分析，系统的核心实体包括：

- **患者（Patient）**：包含 `patient_id`、`name`、`gender`、`age`、`contact_number` 等属性。
- **医生（Doctor）**：包含 `doctor_id`、`name`、`gender`、`department`、`title` 等属性。
- **处方（Prescription）**：包含 `prescription_id`、`patient_id`、`doctor_id`、`date`、`amount`、`status` 等属性。
- **任务（Task）**：包含 `task_id`、`prescription_id`、`worker_id`、`status` 等属性。

**3.2 局部 ER 图**

局部 ER 图展示了各个子系统的实体关系：

- **患者与处方**：每个患者可能有多个处方，患者与处方通过 `patient_id` 关联。
- **处方与任务**：每个处方对应一个任务，任务分配给多个工作人员。

**3.3 全局 ER 图**

全局 ER 图展示了系统中所有实体的关系，包括患者、医生、处方、任务、工人和管理员等。每个实体通过外键与其他实体相连接，确保数据的一致性和完整性。

------

#### **4. 中药代煎系统逻辑结构设计**

**4.1 关系模型设计**

基于需求分析和概念结构设计，系统的关系模型如下：

- **患者表（Patient）**：
	- `patient_id`（INT，主键，自动生成）
	- `name`（VARCHAR(50)）
	- `gender`（VARCHAR(10)）
	- `age`（INT）
	- `contact_number`（VARCHAR(15)）
- **医生表（Doctor）**：
	- `doctor_id`（INT，主键）
	- `name`（VARCHAR(50)）
	- `gender`（VARCHAR(10)）
	- `department`（VARCHAR(50)）
	- `title`（VARCHAR(50)）
- **处方表（Prescription）**：
	- `prescription_id`（INT，主键）
	- `patient_id`（INT，外键，关联 `Patient`）
	- `doctor_id`（INT，外键，关联 `Doctor`）
	- `date`（DATETIME）
	- `amount`（DECIMAL(10,2)）
	- `usage_instructions`（TEXT）
- **任务表（Task）**：
	- `task_id`（INT，主键）
	- `prescription_id`（INT，外键，关联 `Prescription`）
	- `worker_id`（INT，外键，关联 `Worker`）
	- `status`（VARCHAR(20)）

**4.2 数据库触发器与存储过程**

数据库中使用了触发器和存储过程来确保数据的自动化处理和一致性：

- **存储过程 `InsertDoctor`**：自动生成医生ID，并插入医生信息。
- **触发器**：确保数据完整性，例如在插入新患者信息时，自动为患者分配唯一的 `patient_id`。

------

#### **5. 安全性与经济性分析**

**5.1 安全性分析**

系统通过加密算法、SSL 数据传输和权限控制来保障数据的安全。患者个人信息、处方内容等敏感数据通过加密存储，防止泄漏。

**5.2 经济性分析**

系统的开发不需要额外的设备费用或软件开发费用，且通过自动化管理减少了人工成本，提高了工作效率。系统能够有效提升代煎服务的质量和效率，从而带来更多客户，推动经济效益增长。

------

#### **6. 测试与验证**

**6.1 测试用例**

- **功能测试**：确保患者信息录入、处方开具、任务分配等功能的正确性。
- **性能测试**：测试系统在大数据量下的响应时间和稳定性。

**6.2 性能验证**

通过模拟高负载环境，验证系统在多个用户同时操作时的性能表现，确保在实际运营中系统的高效性和稳定性。

------

#### **7. 结论与未来展望**

本系统通过信息化管理提高了中药代煎的效率和质量，减少了人工干预，提升了患者满意度和医院/药店的运营效益。

**未来展望**：未来可以将系统扩展为跨平台应用，支持移动设备接入，进一步提升用户体验；同时，系统可与医院其他管理系统进行集成，提供更全面的服务。

