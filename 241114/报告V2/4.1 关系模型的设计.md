### 4.1 关系模型的设计

#### 4.1.1 用户表
**关系模式**：用户表（uuid, username, password, role, role_id）  
**主键**：uuid  
**外键**：role_id → 角色表主键  
**数据类型**：
- **uuid**: UNIQUEIDENTIFIER，非空，自动生成  
- **username**: VARCHAR(50)，非空，唯一  
- **password**: VARCHAR(100)，非空  
- **role**: VARCHAR(20)，非空，取值范围为 'admin', 'doctor', 'patient', 'worker'  
- **role_id**: INT，可空，外键，关联角色表  

---

#### 4.1.2 患者表
**关系模式**：患者表（patient_id, name, gender, age, contact_number）  
**主键**：patient_id  
**外键**：无  
**数据类型**：
- **patient_id**: INT，非空，自动生成，范围 10000001 起  
- **name**: VARCHAR(50)，非空  
- **gender**: VARCHAR(10)，可空，取值范围为 '男', '女'  
- **age**: INT，可空，正整数  
- **contact_number**: VARCHAR(15)，可空  

---

#### 4.1.3 医生表
**关系模式**：医生表（doctor_id, name, gender, department, title, contact_number）  
**主键**：doctor_id  
**外键**：无  
**数据类型**：
- **doctor_id**: INT，非空，自定义规则生成  
- **name**: VARCHAR(50)，非空  
- **gender**: VARCHAR(10)，可空，取值范围为 '男', '女'  
- **department**: VARCHAR(50)，可空  
- **title**: VARCHAR(50)，可空，取值范围如 '主任医师' 等  
- **contact_number**: VARCHAR(15)，可空  

---

#### 4.1.4 工人表
**关系模式**：工人表（worker_id, name, age, contact_number）  
**主键**：worker_id  
**外键**：无  
**数据类型**：
- **worker_id**: INT，非空，自动生成，范围 10000001 起  
- **name**: VARCHAR(50)，非空  
- **age**: INT，可空，正整数  
- **contact_number**: VARCHAR(15)，可空  

---

#### 4.1.5 管理员表
**关系模式**：管理员表（admin_id, name, contact_number）  
**主键**：admin_id  
**外键**：无  
**数据类型**：
- **admin_id**: INT，非空，自动生成，范围从 1 起  
- **name**: VARCHAR(50)，可空  
- **contact_number**: VARCHAR(15)，可空  

---

#### 4.1.6 处方表
**关系模式**：处方表（prescription_id, patient_id, doctor_id, date, amount, usage_instructions, status, expected_pickup_time）  
**主键**：prescription_id  
**外键**：
- patient_id → 患者表(patient_id)  
- doctor_id → 医生表(doctor_id)  
**数据类型**：
- **prescription_id**: INT，非空，自动生成  
- **patient_id**: INT，可空，关联患者表  
- **doctor_id**: INT，可空，关联医生表  
- **date**: DATETIME，非空，自动生成当前时间  
- **amount**: FLOAT，可空，正数  
- **usage_instructions**: TEXT，可空  
- **status**: VARCHAR(20)，默认值 '待配方'，取值范围 '待配方', '待浸泡', '待煎药', '已完成'  
- **expected_pickup_time**: DATETIME，可空  

---

#### 4.1.7 任务表
**关系模式**：任务表（task_id, prescription_id, receive_worker_id, receive_worker_name, form_worker_id, form_worker_name, decoction_worker_id, decoction_worker_name, admin_id, admin_name, receive_time, form_time, decoction_start_time, decoction_end_time, status）  
**主键**：task_id  
**外键**：
- prescription_id → 处方表(prescription_id)  
- receive_worker_id → 工人表(worker_id)  
- form_worker_id → 工人表(worker_id)  
- decoction_worker_id → 工人表(worker_id)  
- admin_id → 管理员表(admin_id)  
**数据类型**：
- **task_id**: INT，非空，自动生成  
- **prescription_id**: INT，可空，关联处方表  
- **receive_worker_id**: INT，可空，关联工人表  
- **receive_worker_name**: VARCHAR(50)，可空  
- **form_worker_id**: INT，可空，关联工人表  
- **form_worker_name**: VARCHAR(50)，可空  
- **decoction_worker_id**: INT，可空，关联工人表  
- **decoction_worker_name**: VARCHAR(50)，可空  
- **admin_id**: INT，可空，关联管理员表  
- **admin_name**: VARCHAR(50)，可空  
- **receive_time**: DATETIME，可空  
- **form_time**: DATETIME，可空  
- **decoction_start_time**: DATETIME，可空  
- **decoction_end_time**: DATETIME，可空  
- **status**: VARCHAR(20)，默认值 '未完成'，取值范围 '未完成', '完成'  
